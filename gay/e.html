<!DOCTYPE html>
<html>
<head>
  <title id="pageTitle">Prompt Title</title>
  <link rel="stylesheet" href="style.css">
  <style>
    article {
      max-width: 600px;
      margin: auto;
      display: block;
    }
    body {
      font-family: Arial, sans-serif;
      padding: 30px;
      text-align: center;
    }
    .story {
      margin: 30px auto;
      max-width: 600px;
      font-size: 18px;
      line-height: 1.6;
      background-color: #ffffff;
      padding: 20px;
      border-radius: 10px;
    }
    .button-group {
      margin-top: 30px;
    }
    #customDisplay {
      margin-bottom: 30px;
      font-size: 16px;
      line-height: 1.5;
    }
    
    #copyBuffer {
      position: absolute;
      left: -9999px;
    }
  </style>
</head>
<body class="prompt">
<article>
  <h2 id="promptTitle" class="prompt">Prompt Title</h2>
  <p>By Tenshilove</p>

  <div id="customDisplay"></div>
  <button onclick="goToFix()" class="storyButton">Fix Parameters</button>
  <button onclick="goToPage('home.html')" class="storyButton">To Index</button>

  <div class="story">
    <div id="storyBox"></div>
    <button onclick="copyStory()" class="storyButton">Copy Story</button>
  </div>

  <div id="storyContainer"></div>
  <div id="storyDisplay"></div>
  <textarea id="copyBuffer"></textarea>
</article>

<script>
  const params = new URLSearchParams(window.location.search);

  const requiredFields = [
    "PregnantName", "PregnantSheHeThey", "PregnantHerHimThem",
    "PregnantHerHisTheir", "PregnantHersHisTheirs",
    "OtherName", "OtherSheHeThey", "OtherHerHimThem",
    "OtherHerHisTheir", "OtherHersHisTheirs"
  ];

  const missing = requiredFields.filter(field => !params.get(field));
  if (missing.length > 0) {
    window.location.href = `fix.html?${params.toString()}`;
  }

  const lc = str => (str || "").toLowerCase();
  const cap = str => (str || "").charAt(0).toUpperCase() + str.slice(1);

  const PregnantName = cap(lc(params.get("PregnantName")));
  const PregnantSheHeThey = lc(params.get("PregnantSheHeThey"));
  const PregnantHerHimThem = lc(params.get("PregnantHerHimThem"));
  const PregnantHerHisTheir = lc(params.get("PregnantHerHisTheir"));
  const PregnantHersHisTheirs = lc(params.get("PregnantHersHisTheirs"));

  const OtherName = cap(lc(params.get("OtherName")));
  const OtherSheHeThey = lc(params.get("OtherSheHeThey"));
  const OtherHerHimThem = lc(params.get("OtherHerHimThem"));
  const OtherHerHisTheir = lc(params.get("OtherHerHisTheir"));
  const OtherHersHisTheirs = lc(params.get("OtherHersHisTheirs"));

  let PregnantIsAre = "is", PregnantWasWere = "was", PregnantHasHave = "has", PregnantDoesDo = "does";
  let OtherIsAre = "is", OtherWasWere = "was", OtherHasHave = "has", OtherDoesDo = "does";

  if (PregnantSheHeThey === "they") {
    PregnantIsAre = "are"; PregnantWasWere = "were"; PregnantHasHave = "have"; PregnantDoesDo = "do";
  }
  if (OtherSheHeThey === "they") {
    OtherIsAre = "are"; OtherWasWere = "were"; OtherHasHave = "have"; OtherDoesDo = "do";
  }



  // ✅ Step 1: Insert your main prompt text here between the ``
  const storyText = `${OtherName} and ${PregnantName} were practically bouncing with excitement. Their surrogate mother was well into her second trimester, and her baby bump was beautifully undeniable. Today was an appointment day, and the parents-to-be couldn't wait to see her. They imagined their little one, growing bigger and stronger with each passing week, and a warmth spread through their chests that had nothing to do with the summer heat.
When they arrived, their surrogate greeted them with a cheerful smile. She glowed with a special kind of radiance and, without a word, extended her belly towards them. ${OtherName} and ${PregnantName} eagerly accepted the unspoken invitation, their hands gently pressing onto her warm, firm stomach. It was an instant connection, a tangible link to the precious life flourishing within. They felt closer to their kitten than ever, a quiet joy settling over them as they imagined tiny kicks and flutters. The appointment went smoothly, with happy reports from the doctor, only adding to their already overflowing spirits.
As they were saying their goodbyes, ${PregnantName}, still beaming, leaned in and softly whispered, "Bye, Petunia!" ${OtherName}'s pleasant expression immediately tightened. "Petunia?" ${OtherSheHeThey} asked, ${OtherHerHisTheir} voice a little too sharp. "${PregnantName}, we've been over this. I really don't like that name." ${PregnantName} just shrugged, still smiling, seemingly unfazed.
The drive home was quiet, a stark contrast to their earlier chatter. ${OtherName}'s irritation was palpable, a dark cloud hanging over the otherwise sunny day. Finally, ${PregnantName} broke the silence. "What's wrong, babe? You're awfully quiet." ${OtherName} sighed, ${OtherHerHisTheir} hands gripping the steering wheel. "It's the name, ${PregnantName}. I don't want to name our kitten Petunia." ${PregnantName}'s cheerful demeanor instantly evaporated, replaced by a defensive frown. "I already told you," ${PregnantSheHeThey} began, ${PregnantHerHisTheir} voice tinged with hurt, "that name belonged to my grandmother. It means a lot to me to use it." 


Question 
What do they decide to do? Fight or Give In
`.trim();
  document.getElementById("storyBox").innerText = storyText;




  // ✅ Step 2: Define your options in one place
  // Each option has 2 things to fill in. Remove the code block for unused options.
  // 1: fill in the "Option X" after the "label:" This will be what displays on the options buttons
  // 2: fill in the text for the options in between the `` after the "response"
  // Note: the response that has l as its next page is the one that does NOT lead to twins.
  const options = {
    "option2": {
      label: "Fight",
      response: `${OtherName} shook ${OtherHerHisTheir} head, ${OtherHerHisTheir} frustration mounting. "I get that, I really do. But I don't think I should be cornered into a name I genuinely dislike for our child, just because of a grandma I've never even met."
${OtherName} didn't let it go. ${cap(OtherSheHeThey)} ${OtherWasWere} usually more easygoing, but on this, ${OtherSheHeThey} put ${OtherHerHisTheir} foot down. ${cap(OtherSheHeThey)} ${OtherWasWere}n't okay with the name, regardless of the sentimental reasons behind it. The evening was filled with a tense silence, punctuated by frustrated sighs and the occasional dirty look from ${PregnantName}. ${cap(PregnantSheHeThey)} felt misunderstood, ${PregnantHerHisTheir} heartfelt desire brushed aside. But as the hours wore on, ${PregnantName} finally, reluctantly, gave in. If it upset ${OtherName} so much, perhaps ${PregnantSheHeThey} could budge. ${cap(PregnantSheHeThey)} really didn't want ${OtherName} to hate their child's name for their entire lives.
A wave of relief washed over ${OtherName}. "Thank you," ${OtherSheHeThey} said, pulling ${PregnantName} into a tight hug. "It means so much to me that you're able to set aside your desire for this, for us." ${PregnantName} leaned into the embrace, the tension slowly easing from ${PregnantHerHisTheir} shoulders. They decided to cuddle together before bed, the difficult conversation behind them, and started to think of new kitten names—names they both loved. And maybe, just maybe, Petunia could still be used as a special middle name, a sweet nod to ${PregnantName}'s beloved grandmother without overshadowing their little one's identity.`
    }


    ,"option1": {
      label: "Give in",
      response: `A silence fell between them again, heavy with unspoken frustration. Then, ${OtherName} glanced over at ${PregnantName} and saw the tears welling up in ${PregnantHerHisTheir} eyes. A pang of guilt hit ${OtherHerHimThem}. ${cap(OtherSheHeThey)} hated seeing ${PregnantName} upset, especially over something that obviously meant so much. The name Petunia still wasn’t ${OtherHerHisTheir} favorite, but maybe it wasn’t that bad? ${cap(OtherSheHeThey)} let out a long, heavy sigh. Perhaps ${OtherSheHeThey} could get used to it in time. Maybe it would feel better if ${OtherSheHeThey} understood more about this mysterious grandmother and why ${PregnantName} wanted to honor her so profoundly.
When they finally got home, ${OtherName} turned to ${PregnantName}. "Hey," ${OtherSheHeThey} said, ${OtherHerHisTheir} voice softer now. "Tell me more about... Granny Petunia. Seriously. I want to hear about her." ${PregnantName}'s eyes lit up, and ${PregnantSheHeThey} nodded eagerly. The two sat down, and ${PregnantName} began to spin tales of ${PregnantHerHisTheir} grandmother. It turned out Petunia wasn’t just any old lady; she was a total force of nature. She "kicked ass and took names," as ${PregnantName} put it. She was confident and brave and gentle and funny, a woman who truly shaped ${PregnantHerHisTheir} life and taught ${PregnantHerHimThem} everything important. ${PregnantName} was convinced that if she were still around, ${OtherName} would have absolutely adored her.
As ${PregnantName} spoke, a new image of "Petunia" began to form in ${OtherName}'s mind. ${cap(OtherSheHeThey)} started to see her as this incredible, vibrant woman. ${cap(OtherSheHeThey)} found ${OtherHerHimThem}self agreeing with ${PregnantName} – yes, ${OtherSheHeThey} probably would have loved her. Maybe it sounded like an "old lady's name," but it wasn't just any old lady's name. It was a badass old lady's name. And suddenly, ${OtherName} realized, ${OtherSheHeThey} would be glad if their child carried on the legacy of Granny Petunia. "Okay, fine," ${OtherSheHeThey} conceded. "Petunia it is." It really did sound rather sweet, after all.`,
          next: "l"
}


  };


const container = document.getElementById("storyContainer");
for (const key in options) {
  const btn = document.createElement("button");
  btn.className = "storyButton";
  btn.textContent = options[key].label;

  btn.onclick = () => {
    let nextKey = options[key].next;

    // Add 50/50 logic for option2
    if (key === "option2") {
      nextKey = Math.random() < 0.267 ? "m" : "n";
    }

    showStory(key, nextKey); // Pass the dynamic nextKey
  };

  container.appendChild(btn);
}

  // ✅ Step 3: Insert the Prompt Title: Conception, Happy, Promotion, etc
  const promptTitle = "Kitten Names";

  
  document.getElementById("pageTitle").innerText = promptTitle;
  document.getElementById("promptTitle").innerText = promptTitle;


  const displayHTML = `
    <strong>Carrying Parent Name:</strong> ${PregnantName}<br>
    <strong>Pronouns:</strong> 
      ${PregnantSheHeThey} /
      ${PregnantHerHimThem} /
      ${PregnantHerHisTheir} /
      ${PregnantHersHisTheirs}<br>
    <strong>Other Parent Name:</strong> ${OtherName}<br>
    <strong>Pronouns:</strong> 
      ${OtherSheHeThey} /
      ${OtherHerHimThem} /
      ${OtherHerHisTheir} /
      ${OtherHersHisTheirs}
  `;
  document.getElementById("customDisplay").innerHTML = displayHTML;

  function goToFix() {
    window.location.href = `fix.html?${params.toString()}`;
  }

  function goToPage(page) {
    window.location.href = `${page}?${params.toString()}`;
  }

  function copyStory() {
    const story = document.getElementById("storyBox").innerText;
    navigator.clipboard.writeText(story)
      .then(() => alert("Story copied to clipboard!"))
      .catch(err => {
        alert("Failed to copy story.");
        console.error(err);
      });
  }

  function copyFromBuffer() {
    const buffer = document.getElementById("copyBuffer");
    buffer.select();
    buffer.setSelectionRange(0, 99999);
    navigator.clipboard.writeText(buffer.value)
      .then(() => alert("Story copied to clipboard!"))
      .catch(err => {
        alert("Failed to copy.");
        console.error(err);
      });
  }

function showStory(key) {
  const option = options[key];
  if (!option) return;

  // Determine the next page
  let nextPage = option.next;
  if (key === "option2") {
    nextPage = Math.random() < 0.267 ? "m" : "l";
  }

  // Set the response in the copy buffer
  document.getElementById("copyBuffer").value = option.response;

  // Display the story and buttons
  document.getElementById("storyDisplay").innerHTML = `
    <p class="story"><strong>${option.label} path:</strong><br>${option.response.replace(/\n/g, '<br>')}</p>
    <button class="storyButton" onclick="copyFromBuffer()">Copy ${option.label}</button>
    <button class="storyButton" onclick="goToPage('${nextPage}.html')">Continue ${option.label}</button>
  `;
}
</script>
</body>
</html>
