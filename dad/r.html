<!DOCTYPE html>
<html>
<head>
  <title id="pageTitle">Prompt Title</title>
  <link rel="stylesheet" href="style.css">
  <style>
    article {
      max-width: 600px;
      margin: auto;
      display: block;
    }
    body {
      font-family: Arial, sans-serif;
      padding: 30px;
      text-align: center;
    }
    .story {
      margin: 30px auto;
      max-width: 600px;
      font-size: 18px;
      line-height: 1.6;
      background-color: #ffffff;
      padding: 20px;
      border-radius: 10px;
    }
    .button-group {
      margin-top: 30px;
    }
    #customDisplay {
      margin-bottom: 30px;
      font-size: 16px;
      line-height: 1.5;
    }
    
    #copyBuffer {
      position: absolute;
      left: -9999px;
    }
  </style>
</head>
<body class="prompt">
<article>
  <h2 id="promptTitle" class="prompt">Prompt Title</h2>
  <p>By Tenshilove</p>

  <div id="customDisplay"></div>
  <button onclick="goToFix()" class="storyButton">Fix Parameters</button>
  <button onclick="goToPage('home.html')" class="storyButton">To Index</button>

  <div class="story">
    <div id="storyBox"></div>
    <button onclick="copyStory()" class="storyButton">Copy Story</button>
  </div>

  <div id="storyContainer"></div>
  <div id="storyDisplay"></div>
  <textarea id="copyBuffer"></textarea>
</article>

<script>
  const params = new URLSearchParams(window.location.search);

  const requiredFields = [
    "PregnantName", "PregnantSheHeThey", "PregnantHerHimThem",
    "PregnantHerHisTheir", "PregnantHersHisTheirs",
    "OtherName", "OtherSheHeThey", "OtherHerHimThem",
    "OtherHerHisTheir", "OtherHersHisTheirs"
  ];

  const missing = requiredFields.filter(field => !params.get(field));
  if (missing.length > 0) {
    window.location.href = `fix.html?${params.toString()}`;
  }

  const lc = str => (str || "").toLowerCase();
  const cap = str => (str || "").charAt(0).toUpperCase() + str.slice(1);

  const PregnantName = cap(lc(params.get("PregnantName")));
  const PregnantSheHeThey = lc(params.get("PregnantSheHeThey"));
  const PregnantHerHimThem = lc(params.get("PregnantHerHimThem"));
  const PregnantHerHisTheir = lc(params.get("PregnantHerHisTheir"));
  const PregnantHersHisTheirs = lc(params.get("PregnantHersHisTheirs"));

  const OtherName = cap(lc(params.get("OtherName")));
  const OtherSheHeThey = lc(params.get("OtherSheHeThey"));
  const OtherHerHimThem = lc(params.get("OtherHerHimThem"));
  const OtherHerHisTheir = lc(params.get("OtherHerHisTheir"));
  const OtherHersHisTheirs = lc(params.get("OtherHersHisTheirs"));

  let PregnantIsAre = "is", PregnantWasWere = "was", PregnantHasHave = "has", PregnantDoesDo = "does";
  let OtherIsAre = "is", OtherWasWere = "was", OtherHasHave = "has", OtherDoesDo = "does";

  if (PregnantSheHeThey === "they") {
    PregnantIsAre = "are"; PregnantWasWere = "were"; PregnantHasHave = "have"; PregnantDoesDo = "do";
  }
  if (OtherSheHeThey === "they") {
    OtherIsAre = "are"; OtherWasWere = "were"; OtherHasHave = "have"; OtherDoesDo = "do";
  }



  // ✅ Step 1: Insert your main prompt text here between the ``
  const storyText = `The nursery was painted a calming shade of green, tiny outfits were folded neatly in drawers, and the hospital bag, packed with meticulous care, stood ready by the door. ${OtherName} ${OtherWasWere} brimming with excited anticipation, just days away from the due date. Photos and updates from the surrogate were coming in on the regular. Now well into her third trimester, she carried their precious cargo with an impressive grace that belied her considerable size. ${OtherName} had intended to arrange ${OtherHerHisTheir} family leave to begin several days prior, ensuring ${OtherSheHeThey}'d be there the very second their surrogate gave ${OtherHerHimThem} the fateful call. However, in the haste and overwhelming pressure of the preparations, ${OtherName}, had missed ${OtherHerHisTheir} chance to claim the leave early and instead had it scheduled at the end of the week. As life often does, it had a flair for the dramatic, and one particular evening decided to rewrite ${OtherHerHisTheir} carefully orchestrated timeline.
That evening found the surrogate mother alone, navigating the increasingly challenging landscape of her own home. Simple tasks, like putting away clean dishes, had become Olympic feats. Her perfectly round, prominently protruding belly seemed to have a mind of its own, constantly getting in the way. She stretched, grunting softly, to reach a top shelf, her fingers grasping for a clean coffee cup. Just as she secured it, a sharp, searing pain seized her. It wasn't the dull ache of late pregnancy; this was something fierce, demanding, undeniably a contraction. Her breath hitched, her eyes widened in primal fear. The world spun for a moment, then narrowed to the rhythmic ebb and flow of the pain. When it finally receded, leaving her trembling and breathless, she composed herself. Her fingers, fumbling with a sudden tremor, reached for her phone to call ${OtherName} while simultaneously slipping on her shoes and grabbing her keys.
Miles away, in the hushed, late-evening world of ${OtherHerHisTheir} office, ${OtherName}'s phone hummed a silent, desperate symphony on ${OtherHerHisTheir} desk. ${cap(OtherSheHeThey)} ${OtherWasWere} oblivious. A critical, last-minute review had spirited ${OtherHerHimThem} away to a separate conference room. The surrogate kept calling, an insistent series of vibrations that went unnoticed. One, two, three, then a fourth attempt, each buzz a silent plea, swallowed by the focused intensity of the discussion. ${OtherName}’s phone, discreetly set to vibrate mode to avoid disturbing ${OtherHerHisTheir} colleagues, kept the surrogate’s growing distress entirely to itself.
 Back at her home, the silence stretched, punctuated only by the surrogate's increasingly ragged breaths and the distant echo of a fresh contraction building. Four missed calls to ${OtherName}. A cold, sharp tendril of panic snaked its way around her heart. Why ${OtherWasWere}’nt ${OtherSheHeThey} answering? Had something happened to ${OtherHerHimThem}? The seasoned surrogate knew better than to keep waiting on ${OtherHerHimThem}, and called her company’s emergency labor line for a ride to be sent to her. It was a scary thought, to go through all of this just for the expecting parent to miss the birth. She had never been in a situation like that but she’s heard of other surrogates whose expecting parents got cold feet and abandoned them at the birth, just for the kittens to end up in the custody of KPS (Kittenfloss Protective Services). Fear gripped her, as she considered this possibility and continued to try and call ${OtherName}.
As the critical work meeting finally wound down, ${OtherName} stretched, eager to be home. ${cap(OtherSheHeThey)} reached for ${OtherHerHisTheir} phone, only for ${OtherHerHisTheir} heart to sink slightly as ${OtherSheHeThey} saw the stubbornly black screen. Battery dead. A minor annoyance, easily rectified once ${OtherSheHeThey} got in ${OtherHerHisTheir} car, ${OtherSheHeThey} thought. ${cap(OtherSheHeThey)} began gathering ${OtherHerHisTheir} belongings, ${OtherHerHisTheir} mind already drifting to the quiet comfort of home. But just as ${OtherSheHeThey} shrugged on ${OtherHerHisTheir} jacket, a frazzled colleague approached ${OtherHerHimThem}. “${OtherName}, you’re an expert in this, could you just quickly help me with this one thing?” ${OtherName}, always willing to lend a hand, agreed. What seemed like a 'quick fix' morphed into a complex problem. Time, that mischievous thief, accelerated, an hour slipping by unnoticed as ${OtherName} became entirely engrossed in troubleshooting a critical system issue with ${OtherHerHisTheir} coworker.
It wasn't until ${OtherSheHeThey} finally settled into ${OtherHerHisTheir} car, the engine purring to life, and plugged ${OtherHerHisTheir} phone into the charging port that the digital dam broke. Message after message flooded ${OtherHerHisTheir} screen, each notification a sharp jolt to ${OtherHerHisTheir} system. Missed calls from the surrogate, then a volley of terse, urgent texts from them – words like 'labor,' 'hospital,' 'where are you?!' flashing before ${OtherHerHisTheir} disbelieving eyes. A profound, icy dread seeped into ${OtherHerHisTheir} bones. ${cap(OtherHerHisTheir)} heart hammered against ${OtherHerHisTheir} ribs as ${OtherSheHeThey} immediately called her back, the ringing tone a frantic drumbeat in ${OtherHerHisTheir} ears. She answered, her voice a furious torrent of panic and worry, "Where are you!? What happened?! Are you okay?!" And then, mid-shouting, the phone died again, the battery apparently delivering its last, cruel gasp. Reality slammed into ${OtherName} like a physical blow. ${cap(OtherSheHeThey)} ${OtherWasWere} going to miss it. She was at the hospital. Without a second thought, ${OtherSheHeThey} swerved, making a swift, decisive lane change, and pressed the accelerator. Every fiber of ${OtherHerHisTheir} being screamed one thing: ${OtherSheHeThey} would not miss this! ${cap(OtherSheHeThey)} could not miss the birth of ${OtherHerHisTheir} precious child.
${OtherName} burst through the hospital doors, a whirlwind of adrenaline, apologies, and sheer desperate hope. ${cap(OtherSheHeThey)} found the surrogate, surprisingly, calm. She was propped up in bed, sipping contentedly on a juice box, hooked up to a few monitors but clearly not in immediate distress. The monumental wave of relief that washed over ${OtherHerHimThem} was almost incapacitating, threatening to buckle ${OtherHerHisTheir} knees. ${cap(OtherSheHeThey)} could have never forgiven ${OtherHerHimThem}self, not in a million years, if ${OtherSheHeThey} had missed the profound moment of ${OtherHerHisTheir} child’s arrival because of a dead phone and a lingering work task. ${cap(OtherHerHisTheir)} relief too immense to feel anything but gratitude. ${cap(OtherSheHeThey)} ${OtherWasWere} just so overwhelmingly thankful to be there, by the surrogate’s side now.
Several more hours crawled by, a lengthy but ultimately triumphant labor unfolded. And through every contraction, every breathless push, ${OtherName} was unwavering, a steadfast anchor. When ${OtherHerHisTheir} precious kitten finally entered the world, crying their first mighty cry, ${OtherName} was there, ${OtherHerHisTheir} eyes locked on the tiny, new life before ${OtherHerHimThem}. It had been a chaotic, nerve-wracking journey, filled with unexpected twists and agonizing moments of doubt. But as ${OtherSheHeThey} looked at ${OtherHerHisTheir} child, perfect and miraculous, together with ${OtherHerHimThem} in that sacred moment, it was clear: every second of the struggle had been worth it. They were a family, complete, and the most beautiful chapter of their lives had just begun.
`.trim();
  document.getElementById("storyBox").innerText = storyText;





  const options = {
    "option1": {
      label: "Complete",
      response: `You're all done!`,
      next: "home"
    }


  };


  const container = document.getElementById("storyContainer");
  for (const key in options) {
    const btn = document.createElement("button");
    btn.className = "storyButton";
    btn.textContent = options[key].label;
    btn.onclick = () => showStory(key);
    container.appendChild(btn);
  }

  // ✅ Step 2: Insert the Prompt Title: Conception, Happy, Promotion, etc
  const promptTitle = "Almost Missed It";

  
  document.getElementById("pageTitle").innerText = promptTitle;
  document.getElementById("promptTitle").innerText = promptTitle;


  const displayHTML = `
    <strong>Carrying Parent Name:</strong> ${PregnantName}<br>
    <strong>Pronouns:</strong> 
      ${PregnantSheHeThey} /
      ${PregnantHerHimThem} /
      ${PregnantHerHisTheir} /
      ${PregnantHersHisTheirs}<br>
    <strong>Other Parent Name:</strong> ${OtherName}<br>
    <strong>Pronouns:</strong> 
      ${OtherSheHeThey} /
      ${OtherHerHimThem} /
      ${OtherHerHisTheir} /
      ${OtherHersHisTheirs}
  `;
  document.getElementById("customDisplay").innerHTML = displayHTML;

  function goToFix() {
    window.location.href = `fix.html?${params.toString()}`;
  }

  function goToPage(page) {
    window.location.href = `${page}?${params.toString()}`;
  }

  function copyStory() {
    const story = document.getElementById("storyBox").innerText;
    navigator.clipboard.writeText(story)
      .then(() => alert("Story copied to clipboard!"))
      .catch(err => {
        alert("Failed to copy story.");
        console.error(err);
      });
  }

  function copyFromBuffer() {
    const buffer = document.getElementById("copyBuffer");
    buffer.select();
    buffer.setSelectionRange(0, 99999);
    navigator.clipboard.writeText(buffer.value)
      .then(() => alert("Story copied to clipboard!"))
      .catch(err => {
        alert("Failed to copy.");
        console.error(err);
      });
  }

  function showStory(key) {
    const option = options[key];
    if (!option) return;

    document.getElementById("copyBuffer").value = option.response;

    document.getElementById("storyDisplay").innerHTML = `
      <p class="story"><strong>${option.label} path:</strong><br>${option.response.replace(/\n/g, '<br>')}</p>
      <button class="storyButton" onclick="copyFromBuffer()">Copy ${option.label}</button>
      <button class="storyButton" onclick="goToPage('${option.next}.html')">Continue ${option.label}</button>
    `;
  }
</script>
</body>
</html>
