<!DOCTYPE html>
<html>
<head>
  <title id="pageTitle">Prompt Title</title>
  <link rel="stylesheet" href="style.css">
  <style>
    article {
      max-width: 600px;
      margin: auto;
      display: block;
    }
    body {
      font-family: Arial, sans-serif;
      padding: 30px;
      text-align: center;
    }
    .story {
      margin: 30px auto;
      max-width: 600px;
      font-size: 18px;
      line-height: 1.6;
      background-color: #ffffff;
      padding: 20px;
      border-radius: 10px;
    }
    .button-group {
      margin-top: 30px;
    }
    #customDisplay {
      margin-bottom: 30px;
      font-size: 16px;
      line-height: 1.5;
    }
    
    #copyBuffer {
      position: absolute;
      left: -9999px;
    }
  </style>
</head>
<body class="prompt">
<article>
  <h2 id="promptTitle" class="prompt">Prompt Title</h2>
  <p>By Tenshilove</p>

  <div id="customDisplay"></div>
  <button onclick="goToFix()" class="storyButton">Fix Parameters</button>
  <button onclick="goToPage('home.html')" class="storyButton">To Index</button>

  <div class="story">
    <div id="storyBox"></div>
    <button onclick="copyStory()" class="storyButton">Copy Story</button>
  </div>

  <div id="storyContainer"></div>
  <div id="storyDisplay"></div>
  <textarea id="copyBuffer"></textarea>
</article>

<script>
  const params = new URLSearchParams(window.location.search);

  const requiredFields = [
    "PregnantName", "PregnantSheHeThey", "PregnantHerHimThem",
    "PregnantHerHisTheir", "PregnantHersHisTheirs",
    "OtherName", "OtherSheHeThey", "OtherHerHimThem",
    "OtherHerHisTheir", "OtherHersHisTheirs"
  ];

  const missing = requiredFields.filter(field => !params.get(field));
  if (missing.length > 0) {
    window.location.href = `fix.html?${params.toString()}`;
  }

  const lc = str => (str || "").toLowerCase();
  const cap = str => (str || "").charAt(0).toUpperCase() + str.slice(1);

  const PregnantName = cap(lc(params.get("PregnantName")));
  const PregnantSheHeThey = lc(params.get("PregnantSheHeThey"));
  const PregnantHerHimThem = lc(params.get("PregnantHerHimThem"));
  const PregnantHerHisTheir = lc(params.get("PregnantHerHisTheir"));
  const PregnantHersHisTheirs = lc(params.get("PregnantHersHisTheirs"));

  const OtherName = cap(lc(params.get("OtherName")));
  const OtherSheHeThey = lc(params.get("OtherSheHeThey"));
  const OtherHerHimThem = lc(params.get("OtherHerHimThem"));
  const OtherHerHisTheir = lc(params.get("OtherHerHisTheir"));
  const OtherHersHisTheirs = lc(params.get("OtherHersHisTheirs"));

  let PregnantIsAre = "is", PregnantWasWere = "was", PregnantHasHave = "has", PregnantDoesDo = "does";
  let OtherIsAre = "is", OtherWasWere = "was", OtherHasHave = "has", OtherDoesDo = "does";

  if (PregnantSheHeThey === "they") {
    PregnantIsAre = "are"; PregnantWasWere = "were"; PregnantHasHave = "have"; PregnantDoesDo = "do";
  }
  if (OtherSheHeThey === "they") {
    OtherIsAre = "are"; OtherWasWere = "were"; OtherHasHave = "have"; OtherDoesDo = "do";
  }



  // ✅ Step 1: Insert your main prompt text here between the ``
  const storyText = `${OtherName} is officially in the exciting, yet sometimes bewildering, second trimester of ${OtherHerHisTheir} pregnancy, and their surrogate’s little bump was starting to make its grand debut. ${OtherName}, bless ${OtherHerHisTheir} heart, was absolutely thrilled. ${cap(OtherSheHeThey)} couldn't keep their hands off her during one of their recent meetings. She seemed to not mind. ${cap(OtherHerHisTheir)} look of pure wonder was infectious, quietly imagining ${OtherHerHisTheir} precious child growing inside. Despite the momentary bouts of happiness when ${OtherSheHeThey} ${OtherWasWere} around the surrogate, most of ${OtherHerHisTheir} days were getting more stressful than ${OtherSheHeThey}’d ever anticipated.
${OtherName} felt the pressing weight of ${OtherHerHisTheir} coming responsibilities weighing down on ${OtherHerHimThem}. The thought of being responsible for the well being and the raising of another life was draining, and the sheer mental weight of upcoming life changes started to press down on ${OtherHerHimThem}. Juggling ${OtherHerHisTheir} job, daily responsibilities, and friendships on top of all the preparations they had to do for the coming kitten proved to be a Herculean task. Despite ${OtherHerHisTheir} best intentions to take things slow and enjoy this journey, ${OtherName} often felt overwhelmed, teetering on the edge of exhaustion.
One quiet evening, the dam finally broke. Tears streamed down ${OtherName}’s face as ${OtherSheHeThey} succumbed to ${OtherHerHisTheir} deep insecurities and the fear of not being a good enough parent. ${OtherName} felt a pang of helplessness. ${OtherName} felt frustrated; ${OtherSheHeThey} didn’t know anything about raising kits.
Distraught and in desperate need of advice, ${OtherName} reached for ${OtherHerHisTheir} phone and called ${OtherHerHisTheir} mom. After a long conversation filled with shared tears and comforting words, ${OtherHerHisTheir} mother dropped a surprising suggestion: "Why don't you move closer to us?" ${OtherName} was stunned at first. The idea felt monumental, almost impossible. But as ${OtherSheHeThey} hung up, a seed of possibility began to sprout. Having ${OtherHerHisTheir} family nearby, especially when the kitten arrived, could be a lifeline, a much-needed source of help and emotional support to ease the inevitable stress of new parenthood.
The pros were undeniable – built-in childcare, emotional support, and the comfort of family during such a delicate time. But the cons were equally significant. It would mean ${OtherName} changing jobs, finding a new rhythm in a different environment, and uprooting ${OtherHerHisTheir} entire life at a time when stability felt most crucial. It was a daunting prospect, a decision that would shape ${OtherHerHisTheir} future in profound ways. As ${OtherSheHeThey} mulled it over, the silence in the room was heavy, filled with the weight of an immense, life-altering choice.
Question 
Should ${OtherSheHeThey} move?
`.trim();
  document.getElementById("storyBox").innerText = storyText;




  // ✅ Step 2: Define your options in one place
  // Each option has 2 things to fill in. Remove the code block for unused options.
  // 1: fill in the "Option X" after the "label:" This will be what displays on the options buttons
  // 2: fill in the text for the options in between the `` after the "response"
  // Note: the response that has n as its next page is the one that does NOT lead to twins.
  const options = {
    "option1": {
      label: "Move to be near family",
      response: `But as ${OtherSheHeThey} thought it over, the answer slowly became clear. While it was undoubtedly a massive undertaking, the potential benefits and the promise of family support couldn't be ignored. The decision was made: ${OtherSheHeThey} would move closer to ${OtherHerHisTheir} family. ${cap(OtherSheHeThey)} knew ${OtherSheHeThey} had to act quickly if ${OtherSheHeThey} wanted to have a place ready when the kitten arrived, and everything seemed to shift into lightning speed. ${OtherName}, incredibly, was able to secure a transfer to an office in that area, accepting a small pay cut. Almost immediately, ${OtherSheHeThey} began their search for a new home.
${cap(OtherSheHeThey)} decided to stay in ${OtherHerHisTheir} original city until the kitten was born, to remain close to the surrogate, but having the home ready ahead of time was important to ${OtherHerHimThem}. This way ${OtherSheHeThey} won't have to be house hunting while trying to spend time with ${OtherHerHisTheir} little one and adjusting to ${OtherHerHisTheir} new schedule. In what felt like the blink of an eye, just two short months later, ${OtherSheHeThey} found ${OtherHerHimThem}self surrounded by boxes in ${OtherHerHisTheir} new living room. The air was filled with the cheerful hum of ${OtherName}'s family, all hands-on deck, helping ${OtherHerHimThem} unpack and settle in. As ${OtherName} looked around at the familiar faces, a profound sense of relief washed over ${OtherHerHimThem}. With ${OtherHerHisTheir} mother and the rest of ${OtherHerHisTheir} family now so close, lending their invaluable support, ${OtherSheHeThey} felt a powerful surge of comfort and confidence. ${cap(OtherHerHisTheir)} new beginning felt truly right, a solid foundation for the amazing adventure ahead.
`,
      next: "n"
    }


    ,"option2": {
      label: "Don't move",
      response: `After much discussion, weighing the pros and cons late into the night, the difficult decision was made. Moving, while a lovely dream, was simply out of the cards. ${cap(OtherSheHeThey)} couldn't uproot ${OtherHerHisTheir} life now, with the kitten coming so soon. What if ${OtherSheHeThey} struggled to find new work? What if ${OtherSheHeThey} couldn't find a home that felt just right, that felt like ${OtherHersHisTheirs}? The fantasy of having ${OtherHerHisTheir} family just down the street was alluring, but it wasn't logical right now. ${cap(OtherSheHeThey)} couldn't panic; ${OtherSheHeThey} had this under control. ${OtherName}, though still feeling a little lost without ${OtherHerHisTheir} family physically close, knew this was right.
Instead of relocating, ${OtherName} decided to lean into more regular calls with ${OtherHerHisTheir} mother. Having a trusted ear to vent to, and a seasoned voice to ask for advice, did wonders for ${OtherName}’s confidence. Sometimes, mother really did know best. ${OtherName}’s mother even promised to come visit when the kitten was due, offering ${OtherHerHimThem} invaluable help during the first precious few days. ${cap(OtherSheHeThey)} felt like ${OtherSheHeThey} had made the most responsible decision. The big day drew closer and ${OtherSheHeThey} trudged on, now with a renewed sense of confidence and peace.
.`
    }


  };


const container = document.getElementById("storyContainer");
for (const key in options) {
  const btn = document.createElement("button");
  btn.className = "storyButton";
  btn.textContent = options[key].label;

  btn.onclick = () => {
    let nextKey = options[key].next;

    // Add 50/50 logic for option2
    if (key === "option2") {
      nextKey = Math.random() < 0.267 ? "m" : "n";
    }

    showStory(key, nextKey); // Pass the dynamic nextKey
  };

  container.appendChild(btn);
}

  // ✅ Step 3: Insert the Prompt Title: Conception, Happy, Promotion, etc
  const promptTitle = "Moving Near Family";

  
  document.getElementById("pageTitle").innerText = promptTitle;
  document.getElementById("promptTitle").innerText = promptTitle;


  const displayHTML = `
    <strong>Carrying Parent Name:</strong> ${PregnantName}<br>
    <strong>Pronouns:</strong> 
      ${PregnantSheHeThey} /
      ${PregnantHerHimThem} /
      ${PregnantHerHisTheir} /
      ${PregnantHersHisTheirs}<br>
    <strong>Other Parent Name:</strong> ${OtherName}<br>
    <strong>Pronouns:</strong> 
      ${OtherSheHeThey} /
      ${OtherHerHimThem} /
      ${OtherHerHisTheir} /
      ${OtherHersHisTheirs}
  `;
  document.getElementById("customDisplay").innerHTML = displayHTML;

  function goToFix() {
    window.location.href = `fix.html?${params.toString()}`;
  }

  function goToPage(page) {
    window.location.href = `${page}?${params.toString()}`;
  }

  function copyStory() {
    const story = document.getElementById("storyBox").innerText;
    navigator.clipboard.writeText(story)
      .then(() => alert("Story copied to clipboard!"))
      .catch(err => {
        alert("Failed to copy story.");
        console.error(err);
      });
  }

  function copyFromBuffer() {
    const buffer = document.getElementById("copyBuffer");
    buffer.select();
    buffer.setSelectionRange(0, 99999);
    navigator.clipboard.writeText(buffer.value)
      .then(() => alert("Story copied to clipboard!"))
      .catch(err => {
        alert("Failed to copy.");
        console.error(err);
      });
  }

function showStory(key) {
  const option = options[key];
  if (!option) return;

  // Determine the next page
  let nextPage = option.next;
  if (key === "option2") {
    nextPage = Math.random() < 0.267 ? "m" : "n";
  }

  // Set the response in the copy buffer
  document.getElementById("copyBuffer").value = option.response;

  // Display the story and buttons
  document.getElementById("storyDisplay").innerHTML = `
    <p class="story"><strong>${option.label} path:</strong><br>${option.response.replace(/\n/g, '<br>')}</p>
    <button class="storyButton" onclick="copyFromBuffer()">Copy ${option.label}</button>
    <button class="storyButton" onclick="goToPage('${nextPage}.html')">Continue ${option.label}</button>
  `;
}
</script>
</body>
</html>
