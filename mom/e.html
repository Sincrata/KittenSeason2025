<!DOCTYPE html>
<html>
<head>
  <title id="pageTitle">Prompt Title</title>
  <link rel="stylesheet" href="style.css">
  <style>
    article {
      max-width: 600px;
      margin: auto;
      display: block;
    }
    body {
      font-family: Arial, sans-serif;
      padding: 30px;
      text-align: center;
    }
    .story {
      margin: 30px auto;
      max-width: 600px;
      font-size: 18px;
      line-height: 1.6;
      background-color: #ffffff;
      padding: 20px;
      border-radius: 10px;
    }
    .button-group {
      margin-top: 30px;
    }
    #customDisplay {
      margin-bottom: 30px;
      font-size: 16px;
      line-height: 1.5;
    }
    
    #copyBuffer {
      position: absolute;
      left: -9999px;
    }
  </style>
</head>
<body class="prompt">
<article>
  <h2 id="promptTitle" class="prompt">Prompt Title</h2>
  <p>By Tenshilove</p>

  <div id="customDisplay"></div>
  <button onclick="goToFix()" class="storyButton">Fix Parameters</button>
  <button onclick="goToPage('home.html')" class="storyButton">To Index</button>

  <div class="story">
    <div id="storyBox"></div>
    <button onclick="copyStory()" class="storyButton">Copy Story</button>
  </div>

  <div id="storyContainer"></div>
  <div id="storyDisplay"></div>
  <textarea id="copyBuffer"></textarea>
</article>

<script>
  const params = new URLSearchParams(window.location.search);

  const requiredFields = [
    "PregnantName", "PregnantSheHeThey", "PregnantHerHimThem",
    "PregnantHerHisTheir", "PregnantHersHisTheirs",
    "OtherName", "OtherSheHeThey", "OtherHerHimThem",
    "OtherHerHisTheir", "OtherHersHisTheirs"
  ];

  const missing = requiredFields.filter(field => !params.get(field));
  if (missing.length > 0) {
    window.location.href = `fix.html?${params.toString()}`;
  }

  const lc = str => (str || "").toLowerCase();
  const cap = str => (str || "").charAt(0).toUpperCase() + str.slice(1);

  const PregnantName = cap(lc(params.get("PregnantName")));
  const PregnantSheHeThey = lc(params.get("PregnantSheHeThey"));
  const PregnantHerHimThem = lc(params.get("PregnantHerHimThem"));
  const PregnantHerHisTheir = lc(params.get("PregnantHerHisTheir"));
  const PregnantHersHisTheirs = lc(params.get("PregnantHersHisTheirs"));

  const OtherName = cap(lc(params.get("OtherName")));
  const OtherSheHeThey = lc(params.get("OtherSheHeThey"));
  const OtherHerHimThem = lc(params.get("OtherHerHimThem"));
  const OtherHerHisTheir = lc(params.get("OtherHerHisTheir"));
  const OtherHersHisTheirs = lc(params.get("OtherHersHisTheirs"));

  let PregnantIsAre = "is", PregnantWasWere = "was", PregnantHasHave = "has", PregnantDoesDo = "does";
  let OtherIsAre = "is", OtherWasWere = "was", OtherHasHave = "has", OtherDoesDo = "does";

  if (PregnantSheHeThey === "they") {
    PregnantIsAre = "are"; PregnantWasWere = "were"; PregnantHasHave = "have"; PregnantDoesDo = "do";
  }
  if (OtherSheHeThey === "they") {
    OtherIsAre = "are"; OtherWasWere = "were"; OtherHasHave = "have"; OtherDoesDo = "do";
  }



  // ✅ Step 1: Insert your main prompt text here between the ``
  const storyText = ` ${PregnantName} ${PregnantWasWere} deep into ${PregnantHerHisTheir} second trimester, eagerly awaiting ${PregnantHerHisTheir} little one. While the excitement was palpable, so was the overwhelming feelings that came with it. ${PregnantName} found ${PregnantHerHimThem}self on an emotional rollercoaster. ${cap(PregnantHerHisTheir)} body was changing in ways ${PregnantSheHeThey} hadn't imagined, and ${PregnantHerHisTheir} mind was a constant whirl of stress and anxiety – worries about the baby’s health, the fear of losing ${PregnantHerHisTheir} job, and just generally keeping everything together when ${PregnantHerHisTheir} life already felt like a juggling act. It was beautiful, but also incredibly exhausting.

Lately, ${PregnantName} felt like ${PregnantSheHeThey} ${PregnantWasWere} perpetually on a short fuse. A trivial disagreement with another shopper at the grocery store had ${PregnantHerHimThem} fuming for hours. The familiar smell of ${PregnantHerHisTheir} workplace, once a comfort, now made ${PregnantHerHisTheir} stomach churn with nausea. Even ${PregnantHerHisTheir} favorite, most comfortable shoes had become instruments of torture, leaving ${PregnantHerHisTheir} swollen feet aching by the end of the day. ${cap(PregnantSheHeThey)} ${PregnantWasWere} ready to tear someone's head off!

One moment, ${PregnantName} felt fine, the next, something mundane would send a wave of irrational irritation through ${PregnantHerHimThem}. It had to be the mood swings, ${PregnantSheHeThey} knew, but ${PregnantHerHisTheir} patience was wearing thin. ${cap(PregnantSheHeThey)} tried to remind ${PregnantHerHimThem}self that this is normal, and ${PregnantHerHisTheir} body would adjust with time. Yet, every day was more and more of a struggle.
`.trim();
  document.getElementById("storyBox").innerText = storyText;




  // ✅ Step 2: Define your options in one place
  // Each option has 2 things to fill in. Remove the code block for unused options.
  // 1: fill in the "Option X" after the "label:" This will be what displays on the options buttons
  // 2: fill in the text for the options in between the `` after the "response"
  // Note: the response that has l as its next page is the one that does NOT lead to twins.
  const options = {
    "option1": {
      label: "Push Through it",
      response: `In moments of solitude, ${PregnantName} would give ${PregnantHerHimThem}self stern, yet gentle, pep talks. ${cap(PregnantSheHeThey)} whispered assurances that these feelings were normal, that ${PregnantHerHisTheir} body was adjusting, and that ${PregnantSheHeThey} would absolutely get through it. This initial resolve, however, was quickly tested as ${PregnantHerHisTheir} symptoms refused to subside. Days of work were missed, and the persistent discomfort and emotional volatility led to tense exchanges with friends and family. It felt like ${PregnantSheHeThey} ${PregnantWasWere} trapped in a storm, unable to see the shore.

But as the weeks continued their slow march, something began to shift. Gradually, almost imperceptibly at first, the relentless nausea started to ease. The extreme fatigue began to lift, and with it, a sliver of ${PregnantHerHisTheir} former self returned. As the haze of acute discomfort cleared, ${PregnantName} was able to reflect on ${PregnantHerHisTheir} recent behavior. With a heartfelt sigh of relief and genuine remorse, ${PregnantSheHeThey} reached out to ${PregnantHerHisTheir} loved ones, apologizing for ${PregnantHerHisTheir} shortness and emotional volatility during what had been an incredibly challenging period.

To ${PregnantHerHisTheir} immense relief, understanding was the overwhelming response. ${cap(PregnantHerHisTheir)} friends and family, witnessing ${PregnantHerHisTheir} struggle from a distance, had already grasped the intensity of what ${PregnantSheHeThey} ${PregnantWasWere} experiencing. ${cap(PregnantHerHisTheir)} coworkers, too, were incredibly empathetic. "Pregnancy is hard enough," one colleague shared kindly, "especially when you're doing it solo. Don't worry about us covering for you; we're happy to help."

${PregnantName} felt a profound sense of gratitude wash over ${PregnantHerHisTheir}. The easing of ${PregnantHerHisTheir} physical symptoms was a blessing, but the unwavering support of ${PregnantHerHisTheir} community was truly priceless. ${cap(PregnantSheHeThey)} thanked them profusely for their patience and understanding, acknowledging that their steadfastness had been a lifeline when things felt most difficult. As ${PregnantHerHisTheir} pregnancy progressed, now with a renewed sense of calm and a strong support system, ${PregnantName} looked forward to the next chapter, knowing ${PregnantSheHeThey} ${PregnantWasWere}n't alone after all.
`,
      next: "l"
    }


    ,"option2": {
      label: "Seek Help",
      response: `One morning, after another particularly rough night and a day filled with uncharacteristic snaps and tears, ${PregnantName} looked in the mirror and realized things had reached a breaking point. This wasn't just "normal" pregnancy discomfort; it felt like too much for one candyfloss to bear. With a deep breath and a surge of self-advocacy, ${PregnantSheHeThey} made the empowering decision to seek help. It was time to talk to ${PregnantHerHisTheir} doctor.

During ${PregnantHerHisTheir} appointment, ${PregnantName} poured out ${PregnantHerHisTheir} heart, describing the unrelenting nausea, the profound discomfort, and the emotional roller coaster that felt entirely out of control. ${cap(PregnantHerHisTheir)} doctor listened with empathy and ordered a series of tests, knowing that sometimes, what feels like normal pregnancy symptoms can be exacerbated by underlying factors. When the results came back, they confirmed ${PregnantName}’s instincts: ${PregnantHerHisTheir} hormonal imbalance was far beyond the typical fluctuations of pregnancy, explaining why ${PregnantSheHeThey} felt more irritable, more nauseous, and significantly more uncomfortable than most expecting floss.

Hearing the doctor validate ${PregnantHerHisTheir} struggles, confirming that ${PregnantHerHisTheir} experience wasn't just "in ${PregnantHerHisTheir} head" but a real, measurable imbalance, brought an overwhelming wave of relief. Tears, a mix of exhaustion and gratitude, streamed down ${PregnantHerHisTheir} face right there in the check-up chair. ${cap(PregnantSheHeThey)} ${PregnantWasWere}n't failing; ${PregnantHerHisTheir} body was just needing a little extra support.

${cap(PregnantHerHisTheir)} doctor prescribed a medication designed to help regulate ${PregnantHerHisTheir} hormones and bring them back into a normal, healthier range. Within just a few days of taking it, ${PregnantName} noticed a remarkable difference. The incessant nausea began to subside, the constant discomfort eased, and the intense mood swings softened into manageable waves. ${cap(PregnantSheHeThey)} truly felt a million times better, like a heavy weight had been lifted. ${PregnantName} was immensely grateful that ${PregnantSheHeThey} had listened to ${PregnantHerHisTheir} body and got the help ${PregnantSheHeThey} and ${PregnantHerHisTheir} kitten so clearly needed, allowing ${PregnantHerHimThem} to embrace the rest of ${PregnantHerHisTheir} pregnancy with newfound peace and comfort.
`
    }


  };


const container = document.getElementById("storyContainer");
for (const key in options) {
  const btn = document.createElement("button");
  btn.className = "storyButton";
  btn.textContent = options[key].label;

  btn.onclick = () => {
    let nextKey = options[key].next;

    // Add 50/50 logic for option2
    if (key === "option2") {
      nextKey = Math.random() < 0.267 ? "m" : "n";
    }

    showStory(key, nextKey); // Pass the dynamic nextKey
  };

  container.appendChild(btn);
}

  // ✅ Step 3: Insert the Prompt Title: Conception, Happy, Promotion, etc
  const promptTitle = "Mood Swings";

  
  document.getElementById("pageTitle").innerText = promptTitle;
  document.getElementById("promptTitle").innerText = promptTitle;


  const displayHTML = `
    <strong>Carrying Parent Name:</strong> ${PregnantName}<br>
    <strong>Pronouns:</strong> 
      ${PregnantSheHeThey} /
      ${PregnantHerHimThem} /
      ${PregnantHerHisTheir} /
      ${PregnantHersHisTheirs}<br>
    <strong>Other Parent Name:</strong> ${OtherName}<br>
    <strong>Pronouns:</strong> 
      ${OtherSheHeThey} /
      ${OtherHerHimThem} /
      ${OtherHerHisTheir} /
      ${OtherHersHisTheirs}
  `;
  document.getElementById("customDisplay").innerHTML = displayHTML;

  function goToFix() {
    window.location.href = `fix.html?${params.toString()}`;
  }

  function goToPage(page) {
    window.location.href = `${page}?${params.toString()}`;
  }

  function copyStory() {
    const story = document.getElementById("storyBox").innerText;
    navigator.clipboard.writeText(story)
      .then(() => alert("Story copied to clipboard!"))
      .catch(err => {
        alert("Failed to copy story.");
        console.error(err);
      });
  }

  function copyFromBuffer() {
    const buffer = document.getElementById("copyBuffer");
    buffer.select();
    buffer.setSelectionRange(0, 99999);
    navigator.clipboard.writeText(buffer.value)
      .then(() => alert("Story copied to clipboard!"))
      .catch(err => {
        alert("Failed to copy.");
        console.error(err);
      });
  }

function showStory(key) {
  const option = options[key];
  if (!option) return;

  // Determine the next page
  let nextPage = option.next;
  if (key === "option2") {
    nextPage = Math.random() < 0.267 ? "m" : "l";
  }

  // Set the response in the copy buffer
  document.getElementById("copyBuffer").value = option.response;

  // Display the story and buttons
  document.getElementById("storyDisplay").innerHTML = `
    <p class="story"><strong>${option.label} path:</strong><br>${option.response.replace(/\n/g, '<br>')}</p>
    <button class="storyButton" onclick="copyFromBuffer()">Copy ${option.label}</button>
    <button class="storyButton" onclick="goToPage('${nextPage}.html')">Continue ${option.label}</button>
  `;
}
</script>
</body>
</html>
